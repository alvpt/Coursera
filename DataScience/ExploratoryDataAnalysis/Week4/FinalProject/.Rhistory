lm(I(child - mean(child))~ I(parent - mean(parent)) - 1, data = galton)
```
---
```{r, fig.height=6,fig.width=7,echo=FALSE}
freqData <- as.data.frame(table(galton$child, galton$parent))
names(freqData) <- c("child", "parent", "freq")
freqData$child <- as.numeric(as.character(freqData$child))
freqData$parent <- as.numeric(as.character(freqData$parent))
g <- ggplot(filter(freqData, freq > 0), aes(x = parent, y = child))
g <- g  + scale_size(range = c(2, 20), guide = "none" )
g <- g + geom_point(colour="grey50", aes(size = freq+20, show_guide = FALSE))
g <- g + geom_point(aes(colour=freq, size = freq))
g <- g + scale_colour_gradient(low = "lightblue", high="white")
lm1 <- lm(galton$child ~ galton$parent)
g <- g + geom_abline(intercept = coef(lm1)[1], slope = coef(lm1)[2], size = 3, colour = grey(.5))
g
```
manipulate(myPlot(beta), beta = slider(0.6, 1.2, step = 0.02))
library(dplyr)
y <- galton$child - mean(galton$child)
x <- galton$parent - mean(galton$parent)
freqData <- as.data.frame(table(x, y))
names(freqData) <- c("child", "parent", "freq")
freqData$child <- as.numeric(as.character(freqData$child))
freqData$parent <- as.numeric(as.character(freqData$parent))
myPlot <- function(beta){
g <- ggplot(filter(freqData, freq > 0), aes(x = parent, y = child))
g <- g + scale_size(range = c(2, 20), guide = "none" )
g <- g + geom_point(colour="grey50", aes(size = freq+20), show.legend = FALSE)
g <- g + geom_point(aes(colour=freq, size = freq))
g <- g + scale_colour_gradient(low = "lightblue", high="white")
g <- g + geom_abline(intercept = 0, slope = beta, size = 3)
mse <- mean( (y - beta * x) ^2 )
g <- g + ggtitle(paste("beta = ", beta, "mse = ", round(mse, 3)))
g
}
manipulate(myPlot(beta), beta = slider(0.6, 1.2, step = 0.02))
library(dplyr)
y <- galton$child - mean(galton$child)
x <- galton$parent - mean(galton$parent)
freqData <- as.data.frame(table(x, y))
names(freqData) <- c("child", "parent", "freq")
freqData$child <- as.numeric(as.character(freqData$child))
freqData$parent <- as.numeric(as.character(freqData$parent))
myPlot <- function(beta){
g <- ggplot(filter(freqData, freq > 0), aes(x = parent, y = child))
g <- g + scale_size(range = c(2, 20), guide = "none" )
g <- g + geom_point(colour="grey50", aes(size = freq+20), show.legend = FALSE)
g <- g + geom_point(aes(colour=freq, size = freq))
g <- g + scale_colour_gradient(low = "lightblue", high="white")
g <- g + geom_abline(intercept = 0, slope = beta, size = 3)
mse <- mean( (y - beta * x) ^2 )
g <- g + ggtitle(paste("beta = ", beta, "mse = ", round(mse, 3)))
g
}
manipulate(myPlot(beta), beta = slider(0.6, 1.2, step = 0.02))
library(dplyr)
y <- galton$child - mean(galton$child)
x <- galton$parent - mean(galton$parent)
freqData <- as.data.frame(table(x, y))
names(freqData) <- c("child", "parent", "freq")
freqData$child <- as.numeric(as.character(freqData$child))
freqData$parent <- as.numeric(as.character(freqData$parent))
myPlot <- function(beta){
g <- ggplot(filter(freqData, freq > 0), aes(x = parent, y = child))
g <- g + scale_size(range = c(2, 20), guide = "none" )
g <- g + geom_point(colour="grey50", aes(size = freq+20), show.legend = FALSE)
g <- g + geom_point(aes(colour=freq, size = freq))
g <- g + scale_colour_gradient(low = "lightblue", high="white")
g <- g + geom_abline(intercept = 0, slope = beta, size = 3)
mse <- mean( (y - beta * x) ^2 )
g <- g + ggtitle(paste("beta = ", beta, "mse = ", round(mse, 3)))
g
}
manipulate(myPlot(beta), beta = slider(0.6, 1.2, step = 0.02))
libray(swirl)
library(swirl)
swirl()
q()
library(swirl)
swirl()
q()
setwd("~/CS/Coursera/DataScience/ExploratoryDataAnalysis/Week4/FinalProject")
## Have total emissions from PM2.5 decreased in the United States
## from 1999 to 2008? Using the base plotting system, make a plot
## showing the total PM2.5 emission from all sources for each of
## the years 1999, 2002, 2005, and 2008.
library(dplyr)
## This first lines loads the data
NEI <- readRDS(".\\data\\summarySCC_PM25.rds")
SCC <- readRDS(".\\data\\Source_Classification_Code.rds")
NEIgrouped <- NEI %>% group_by(year)
NEIgrouped %>% summarise(
Emissions = sum(Emissions)
) %>% plot()
## This first lines loads the data
NEI <- readRDS(".\\data\\summarySCC_PM25.rds")
SCC <- readRDS(".\\data\\Source_Classification_Code.rds")
NEI_filterd <- filter(NEI, fips == "24510")
NEIfilterdANDgrouped <- NEI_filterd %>% group_by(year)
NEIfilterdANDgrouped %>% summarise(
Emissions = sum(Emissions)
) %>% plot()
library(dplyr)
## This first lines loads the data
NEI <- readRDS(".\\data\\summarySCC_PM25.rds")
SCC <- readRDS(".\\data\\Source_Classification_Code.rds")
NEI_filterd <- filter(NEI, fips == "24510")
NEIfilterdANDgrouped <- NEI_filterd %>% group_by(year)
NEIfilterdANDgrouped %>% plottedData <- summarise(
Emissions = sum(Emissions)
) %>% plot()
EIfilterdANDgrouped <- NEI_filterd %>% group_by(year)
NEIfilterdANDgrouped %>% summarise(
Emissions = sum(Emissions)
) %>% plot()
NEIfilterdANDgrouped <- NEI_filterd %>% group_by(year)
NEIfilterdANDgrouped %>% summarise(
Emissions = sum(Emissions)
) %>% plot()
NEIfilterdANDgrouped %>% a = summarise(
Emissions = sum(Emissions)
) %>% plot()
p <- NEIfilterdANDgrouped %>% a = summarise(
Emissions = sum(Emissions)
) %>% plot()
p <- NEIfilterdANDgrouped %>% summarise(
Emissions = sum(Emissions)
) %>% plot()
linmod <- lm(Emissions~year, data= NEIfilterdANDgrouped %>% summarise(
Emissions = sum(Emissions) )
linmod <- lm(Emissions~year, data= NEIfilterdANDgrouped %>% summarise(
Emissions = sum(Emissions) ) )
NEI <- readRDS(".\\data\\summarySCC_PM25.rds")
SCC <- readRDS(".\\data\\Source_Classification_Code.rds")
NEI_filterd <- filter(NEI, fips == "24510")
NEIfilterdANDgrouped <- NEI_filterd %>% group_by(year)
NEIfilterdANDgrouped %>% summarise(
Emissions = sum(Emissions)
) %>% plot()
model <- lm(Emissions~year, data= NEIfilterdANDgrouped %>% summarise(
Emissions = sum(Emissions) ) )
abline(model, lwd = 2)
NEIgrouped <- NEI %>% group_by(year)
NEIgrouped %>% summarise(
Emissions = sum(Emissions)
) %>% plot()
model <- lm(Emissions~year, data= NEIgrouped %>% summarise(
Emissions = sum(Emissions) ) )
abline(model, lwd = 2)
library(ggplot2)
source('~/CS/Coursera/DataScience/ExploratoryDataAnalysis/Week4/FinalProject/plot3.R')
NEIgrouped <- NEI %>% group_by(year)
NEIgrouped %>% summarise(
Emissions = sum(Emissions)
) %>% ggplot() + facet_grid(type ~ .)
NEIgrouped %>% summarise(
Emissions = sum(Emissions)
) %>% ggplot()
ggplot(data=NEIgrouped %>% summarise( Emissions = sum(Emissions)),
aes(x=year, y=Emissions)) + geom_point()
ggplot(data=NEIgrouped %>% summarise( Emissions = sum(Emissions)),
aes(x=year, y=Emissions)) + geom_point() + facet_grid(type ~ .)
NEIgrouped <- NEI %>% group_by(year, type)
View(NEIgrouped)
source('~/CS/Coursera/DataScience/ExploratoryDataAnalysis/Week4/FinalProject/plot3.R')
ggplot(data=NEIgrouped %>% summarise( Emissions = sum(Emissions)),
aes(x=year, y=Emissions)) + geom_point()
NEIgrouped %>% summarise( Emissions = sum(Emissions))
ggplot(data=NEIgrouped %>% summarise( Emissions = sum(Emissions)),
aes(x=year, y=Emissions)) + geom_point() + facet_grid(type ~ .)
ggplot(data=NEIgrouped %>% summarise( Emissions = sum(Emissions)),
aes(x=year, y=Emissions)) + geom_point() +
geom_smooth(method = "lm")+ facet_grid(type ~ .)
ggplot(data=NEIgrouped %>% summarise( Emissions = sum(Emissions)),
aes(x=year, y=Emissions)) + geom_point() +
geom_smooth(method = "lm", se=FALSE)+ facet_grid(type ~ .)
source('~/CS/Coursera/DataScience/ExploratoryDataAnalysis/Week4/FinalProject/plot3.R')
source('~/CS/Coursera/DataScience/ExploratoryDataAnalysis/Week4/FinalProject/plot3.R')
source('~/CS/Coursera/DataScience/ExploratoryDataAnalysis/Week4/FinalProject/plot2.R')
str(SCC)
str(SCC$Short.Name)
s <-str(SCC$Short.Name)
str(SCC$EI.Sector)
levels(str(SCC$EI.Sector))
str(SCC$EI.Sector).levels
grep("Coal", SCC$EI.Sector, value = FALSE)
NEI_filterd <- NEI[grep("Coal", SCC$EI.Sector, value = FALSE)]
g <- grep("Coal", SCC$EI.Sector, value = FALSE)
g
NEI(g)
NEI[g, ]
source('~/CS/Coursera/DataScience/ExploratoryDataAnalysis/Week4/FinalProject/plot2.R')
NEI_filtered <- NEI[grep("Coal", SCC$EI.Sector, value = FALSE), ]
NEIfilteredANDgrouped <- NEI_filterd %>% group_by(year)
NEIfilteredANDgrouped %>% summarise(
Emissions = sum(Emissions)
) %>% plot()
model <- lm(Emissions~year, data= NEIfilteredANDgrouped %>% summarise(
Emissions = sum(Emissions) ) )
abline(model, lwd = 2)
NEI_filtered <- NEI[grep("Coal", SCC$EI.Sector, value = FALSE), ]
NEIfilteredANDgrouped <- NEI_filterd %>% group_by(year)
NEIfilteredANDgrouped %>% summarise(
Emissions = sum(Emissions)
) %>% plot()
model <- lm(Emissions~year, data= NEIfilteredANDgrouped %>% summarise(
Emissions = sum(Emissions) ) )
abline(model, lwd = 2)
NEI_filtered <- NEI[grep("Coal", SCC$EI.Sector, value = FALSE), ]
NEIfilteredANDgrouped <- NEI_filterd %>% group_by(year)
NEIfilteredANDgrouped %>% summarise(
Emissions = sum(Emissions)
) %>% plot()
model <- lm(Emissions~year, data= NEIfilteredANDgrouped %>% summarise(
Emissions = sum(Emissions) ) )
abline(model, lwd = 2)
View(NEI_filterd)
View(NEI_filtered)
NEI <- readRDS(".\\data\\summarySCC_PM25.rds")
SCC <- readRDS(".\\data\\Source_Classification_Code.rds")
NEI_filtered <- NEI[grep("Coal", SCC$EI.Sector, value = FALSE), ]
NEIfilteredANDgrouped <- NEI_filterd %>% group_by(year)
NEIfilteredANDgrouped %>% summarise(
Emissions = sum(Emissions)
) %>% plot()
model <- lm(Emissions~year, data= NEIfilteredANDgrouped %>% summarise(
Emissions = sum(Emissions) ) )
abline(model, lwd = 2)
View(NEI_filtered)
grep("Coal", SCC$EI.Sector, value = FALSE)
NEI <- readRDS(".\\data\\summarySCC_PM25.rds")
SCC <- readRDS(".\\data\\Source_Classification_Code.rds")
NEI <- readRDS(".\\data\\summarySCC_PM25.rds")
NEI_filtered <- NEI[grep("Coal", SCC$EI.Sector, value = FALSE), ]
View(NEI_filtered)
grep("Coal", SCC$EI.Sector, value = FALSE)
View(NEI)
grep("Coal", SCC$EI.Sector, value = TRUE)
grep("Coal", SCC$Short.Name, value = TRUE)
grep("Coal", SCC$Short.Name, value = FALSE)
grep("Coal", SCC$EI.Sector, value = FALSE)
SCC[grepl("coal", SCC$Short.Name, ignore.case = T),]
SCCcoal <- SCC[grepl("coal", SCC$Short.Name, ignore.case = T),]
dim(SCCcoal)
View(SCC)
SCCoal1 <- SCC[grepl("coal", SCC$Short.Name, ignore.case = T),]
dim(SCCoal1)
SCCoal1 <- SCC[grepl("coal", SCC$Short.Name, ignore.case = T),]
dim(SCCoal1)
SCCoal1 <- grep("Coal", SCC$Short.Name, value = TRUE)
NEIgrouped %>% summarise(
Emissions = sum(Emissions)
) %>% plot(main = expression("Total US "~ PM[2.5]~
"Emissions by Year"), ylab = expression(
"Total US "~   PM[2.5] ~ "Emissions"), xlab = "Year")
## Have total emissions from PM2.5 decreased in the United States
## from 1999 to 2008? Using the base plotting system, make a plot
## showing the total PM2.5 emission from all sources for each of
## the years 1999, 2002, 2005, and 2008.
library(dplyr)
## This first lines loads the data
NEI <- readRDS(".\\data\\summarySCC_PM25.rds")
SCC <- readRDS(".\\data\\Source_Classification_Code.rds")
NEIgrouped <- NEI %>% group_by(year)
NEIgrouped %>% summarise(
Emissions = sum(Emissions)
) %>% plot(main = expression("Total US "~ PM[2.5]~
"Emissions by Year"), ylab = expression(
"Total US "~   PM[2.5] ~ "Emissions"), xlab = "Year")
model <- lm(Emissions~year, data= NEIgrouped %>% summarise(
Emissions = sum(Emissions) ) )
abline(model, lwd = 2)
## Have total emissions from PM2.5 decreased in
## the Baltimore City, Maryland (\color{red}{\verb|fips
##  == "24510"|}fips == "24510") from 1999 to 2008?
## Use the base plotting system to make a plot answering
## this question.
library(dplyr)
## This first lines loads the data
NEI <- readRDS(".\\data\\summarySCC_PM25.rds")
SCC <- readRDS(".\\data\\Source_Classification_Code.rds")
NEI_filtered <- filter(NEI, fips == "24510")
NEIfilteredANDgrouped <- NEI_filtered %>% group_by(year)
NEIfilteredANDgrouped %>% summarise(
Emissions = sum(Emissions)
) %>% plot(main = expression("Total Baltimore" ~ PM[2.5]
~ "Emissions by Year"), xlab =
"Year", ylab = expression("Total Baltimore "~
PM[2.5] ~ "Emissions"))
model <- lm(Emissions~year, data= NEIfilteredANDgrouped %>% summarise(
Emissions = sum(Emissions) ) )
abline(model, lwd = 2)
## Of the four types of sources indicated by the
##  \color{red}{\verb|type|}type (point, nonpoint,
## onroad, nonroad) variable, which of these four
## sources have seen decreases in emissions from
## 1999-2008 for Baltimore City? Which have seen
## increases in emissions from 1999-2008? Use the
## ggplot2 plotting system to make a plot answer
## this question.
library(dplyr)
library(ggplot2)
## This first lines loads the data
NEI <- readRDS(".\\data\\summarySCC_PM25.rds")
SCC <- readRDS(".\\data\\Source_Classification_Code.rds")
NEIgrouped <- NEI %>% group_by(year, type)
ggplot(data=NEIgrouped %>% summarise( Emissions = sum(Emissions)),
aes(x=year, y=Emissions)) + geom_point() +
geom_smooth(method = "lm", se=FALSE)+ facet_grid(type ~ .) +
ggtitle(expression("Total Baltimore " ~ PM[2.5] ~
"Emissions by Type and Year")) +
ylab(expression("Total Baltimore " ~ PM[2.5] ~ "Emissions")) +
xlab("Year")
NEI <- readRDS(".\\data\\summarySCC_PM25.rds")
SCC <- readRDS(".\\data\\Source_Classification_Code.rds")
SCCcoal <- SCC[grepl("coal", SCC$Short.Name, ignore.case = T),]
NEIcoal <- NEI[NEI$SCC %in% SCCcoal$SCC,]
totalCoal <- aggregate(Emissions ~ year + type, NEIcoal, sum)
ggplot(totalCoal, aes(year, Emissions, col = type)) +
geom_line() +
geom_point() +
ggtitle(expression("Total US" ~ PM[2.5] ~ "Coal Emission by Type and Year")) +
xlab("Year") +
ylab(expression("US " ~ PM[2.5] ~ "Coal Emission"))
ggplot(totalCoal, aes(year, Emissions, col = type)) +
geom_line() +
geom_point() +
ggtitle(expression("Total US" ~ PM[2.5] ~ "Coal Emission by Type and Year")) +
xlab("Year") +
ylab(expression("US " ~ PM[2.5] ~ "Coal Emission"))
scale_colour_discrete(name = "Type of sources") +
theme(legend.title = element_text(face = "bold"))
ggplot(totalCoal, aes(year, Emissions, col = type)) +
geom_line() +
geom_point() +
ggtitle(expression("Total US" ~ PM[2.5] ~ "Coal Emission by Type and Year")) +
xlab("Year") +
ylab(expression("US " ~ PM[2.5] ~ "Coal Emission")) +
scale_colour_discrete(name = "Type of sources") +
theme(legend.title = element_text(face = "bold"))
l
9
## Across the United States, how have emissions
## from coal combustion-related sources changed
## from 1999-2008?
library(dplyr)
## This first lines loads the data
NEI <- readRDS(".\\data\\summarySCC_PM25.rds")
SCC <- readRDS(".\\data\\Source_Classification_Code.rds")
SCCcoal <- SCC[grepl("coal", SCC$Short.Name, ignore.case = T),]
NEIcoal <- NEI[NEI$SCC %in% SCCcoal$SCC,]
totalCoal <- aggregate(Emissions ~ year + type, NEIcoal, sum)
ggplot(totalCoal, aes(year, Emissions, col = type)) +
geom_line() +
geom_point() +
ggtitle(expression("Total US" ~ PM[2.5] ~ "Coal Emission by Type and Year")) +
xlab("Year") +
ylab(expression("US " ~ PM[2.5] ~ "Coal Emission")) +
scale_colour_discrete(name = "Type of sources") +
theme(legend.title = element_text(face = "bold"))
NEI <- readRDS(".\\data\\summarySCC_PM25.rds")
SCC <- readRDS(".\\data\\Source_Classification_Code.rds")
baltimoreMotor <- subset(NEI, NEI$fips == "24510" & NEI$type == "ON-ROAD")
baltimoreMotorAGG <- aggregate(Emissions ~ year, baltimoreMotor, sum)
ggplot(baltimoreMotorAGG, aes(year, Emissions)) +
geom_line(col = "steelblue3") +
geom_point(col = "steelblue3") +
ggtitle(expression("Baltimore " ~ PM[2.5] ~ "Motor Vehicle Emissions by Year")) +
xlab("Year") +
ylab(expression(~PM[2.5]~ "Motor Vehicle Emissions"))
baltLosAngelesMotors <- subset(NEI, NEI$fips %in% c("24510","06037") & NEI$type == "ON-ROAD")
baltLosAngelesMotorsAGG <- aggregate(Emissions ~ year + fips, baltLosAngelesMotors, sum)
ggplot(baltLosAngelesMotorsAGG, aes(year, Emissions, col = fips)) +
geom_line() +
geom_point() +
ggtitle(expression("Baltimore and Los Angeles" ~ PM[2.5] ~ "Motor Vehicle Emissions by Year")) +
labs(x = "Year", y = expression(~PM[2.5]~ "Motor Vehicle Emissions") )
dir()
## Have total emissions from PM2.5 decreased in
## the Baltimore City, Maryland (\color{red}{\verb|fips
##  == "24510"|}fips == "24510") from 1999 to 2008?
## Use the base plotting system to make a plot answering
## this question.
library(dplyr)
## This first lines loads the data
NEI <- readRDS(".\\data\\summarySCC_PM25.rds")
SCC <- readRDS(".\\data\\Source_Classification_Code.rds")
NEI_filtered <- filter(NEI, fips == "24510")
NEIfilteredANDgrouped <- NEI_filtered %>% group_by(year)
png(file=".\\plot2.png",
width=480, height=480)
NEIfilteredANDgrouped %>% summarise(
Emissions = sum(Emissions)
) %>% plot(main = expression("Total Baltimore" ~ PM[2.5]
~ "Emissions by Year"), xlab =
"Year", ylab = expression("Total Baltimore "~
PM[2.5] ~ "Emissions"))
dev.off()
model <- lm(Emissions~year, data= NEIfilteredANDgrouped %>% summarise(
Emissions = sum(Emissions) ) )
abline(model, lwd = 2)
NEI_filtered <- filter(NEI, fips == "24510")
NEIfilteredANDgrouped <- NEI_filtered %>% group_by(year)
png(file=".\\plot2.png",
width=480, height=480)
NEIfilteredANDgrouped %>% summarise(
Emissions = sum(Emissions)
) %>% plot(main = expression("Total Baltimore" ~ PM[2.5]
~ "Emissions by Year"), xlab =
"Year", ylab = expression("Total Baltimore "~
PM[2.5] ~ "Emissions"))
model <- lm(Emissions~year, data= NEIfilteredANDgrouped %>% summarise(
Emissions = sum(Emissions) ) )
abline(model, lwd = 2)
dev.off()
NEIgrouped <- NEI %>% group_by(year)
png(file=".\\plot1.png",
width=480, height=480)
NEIgrouped %>% summarise(
Emissions = sum(Emissions)
) %>% plot(main = expression("Total US "~ PM[2.5]~
"Emissions by Year"), ylab = expression(
"Total US "~   PM[2.5] ~ "Emissions"), xlab = "Year")
model <- lm(Emissions~year, data= NEIgrouped %>% summarise(
Emissions = sum(Emissions) ) )
abline(model, lwd = 2)
dev.off()
library(ggplot2)
## This first lines loads the data
NEI <- readRDS(".\\data\\summarySCC_PM25.rds")
SCC <- readRDS(".\\data\\Source_Classification_Code.rds")
NEIgrouped <- NEI %>% group_by(year, type)
png(file=".\\plot3.png",
width=480, height=480)
ggplot(data=NEIgrouped %>% summarise( Emissions = sum(Emissions)),
aes(x=year, y=Emissions)) + geom_point() +
geom_smooth(method = "lm", se=FALSE)+ facet_grid(type ~ .) +
ggtitle(expression("Total Baltimore " ~ PM[2.5] ~
"Emissions by Type and Year")) +
ylab(expression("Total Baltimore " ~ PM[2.5] ~ "Emissions")) +
xlab("Year")
dev.off()
SCCcoal <- SCC[grepl("coal", SCC$Short.Name, ignore.case = T),]
NEIcoal <- NEI[NEI$SCC %in% SCCcoal$SCC,]
totalCoal <- aggregate(Emissions ~ year + type, NEIcoal, sum)
png(file=".\\plot3.png",
width=480, height=480)
ggplot(totalCoal, aes(year, Emissions, col = type)) +
geom_line() +
geom_point() +
ggtitle(expression("Total US" ~ PM[2.5] ~ "Coal Emission by Type and Year")) +
xlab("Year") +
ylab(expression("US " ~ PM[2.5] ~ "Coal Emission")) +
scale_colour_discrete(name = "Type of sources") +
theme(legend.title = element_text(face = "bold"))
dev.off()
SCCcoal <- SCC[grepl("coal", SCC$Short.Name, ignore.case = T),]
NEIcoal <- NEI[NEI$SCC %in% SCCcoal$SCC,]
totalCoal <- aggregate(Emissions ~ year + type, NEIcoal, sum)
png(file=".\\plot4.png",
width=480, height=480)
ggplot(totalCoal, aes(year, Emissions, col = type)) +
geom_line() +
geom_point() +
ggtitle(expression("Total US" ~ PM[2.5] ~ "Coal Emission by Type and Year")) +
xlab("Year") +
ylab(expression("US " ~ PM[2.5] ~ "Coal Emission")) +
scale_colour_discrete(name = "Type of sources") +
theme(legend.title = element_text(face = "bold"))
dev.off()
NEIgrouped <- NEI %>% group_by(year, type)
png(file=".\\plot3.png",
width=480, height=480)
ggplot(data=NEIgrouped %>% summarise( Emissions = sum(Emissions)),
aes(x=year, y=Emissions)) + geom_point() +
geom_smooth(method = "lm", se=FALSE)+ facet_grid(type ~ .) +
ggtitle(expression("Total Baltimore " ~ PM[2.5] ~
"Emissions by Type and Year")) +
ylab(expression("Total Baltimore " ~ PM[2.5] ~ "Emissions")) +
xlab("Year")
dev.off()
png(file=".\\plot5.png",
width=480, height=480)
ggplot(baltimoreMotorAGG, aes(year, Emissions)) +
geom_line(col = "steelblue3") +
geom_point(col = "steelblue3") +
ggtitle(expression("Baltimore " ~ PM[2.5] ~ "Motor Vehicle Emissions by Year")) +
xlab("Year") +
ylab(expression(~PM[2.5]~ "Motor Vehicle Emissions"))
dev.off()
baltimoreMotor <- subset(NEI, NEI$fips == "24510" & NEI$type == "ON-ROAD")
baltimoreMotorAGG <- aggregate(Emissions ~ year, baltimoreMotor, sum)
png(file=".\\plot5.png",
width=480, height=480)
ggplot(baltimoreMotorAGG, aes(year, Emissions)) +
geom_line(col = "steelblue3") +
geom_point(col = "steelblue3") +
ggtitle(expression("Baltimore " ~ PM[2.5] ~ "Motor Vehicle Emissions by Year")) +
xlab("Year") +
ylab(expression(~PM[2.5]~ "Motor Vehicle Emissions"))
dev.off()
baltLosAngelesMotors <- subset(NEI, NEI$fips %in% c("24510","06037") & NEI$type == "ON-ROAD")
baltLosAngelesMotorsAGG <- aggregate(Emissions ~ year + fips, baltLosAngelesMotors, sum)
png(file=".\\plot6.png",
width=480, height=480)
ggplot(baltLosAngelesMotorsAGG, aes(year, Emissions, col = fips)) +
geom_line() +
geom_point() +
ggtitle(expression("Baltimore and Los Angeles" ~ PM[2.5] ~ "Motor Vehicle Emissions by Year")) +
labs(x = "Year", y = expression(~PM[2.5]~ "Motor Vehicle Emissions") )
dev.off()
